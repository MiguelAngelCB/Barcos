!function(o){var t={};function e(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return o[r].call(n.exports,n,n.exports,e),n.l=!0,n.exports}e.m=o,e.c=t,e.d=function(o,t,r){e.o(o,t)||Object.defineProperty(o,t,{enumerable:!0,get:r})},e.r=function(o){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},e.t=function(o,t){if(1&t&&(o=e(o)),8&t)return o;if(4&t&&"object"==typeof o&&o&&o.__esModule)return o;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:o}),2&t&&"string"!=typeof o)for(var n in o)e.d(r,n,function(t){return o[t]}.bind(null,n));return r},e.n=function(o){var t=o&&o.__esModule?function(){return o.default}:function(){return o};return e.d(t,"a",t),t},e.o=function(o,t){return Object.prototype.hasOwnProperty.call(o,t)},e.p="",e(e.s=3)}([function(o,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Coordenada=void 0;var r=e(2),n=function(){function o(o,t){this._x=o,this._y=t}return Object.defineProperty(o.prototype,"x",{get:function(){return this._x},set:function(o){this._x=o},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"y",{get:function(){return this._y},set:function(o){this._y=o},enumerable:!1,configurable:!0}),o.prototype.equals=function(o){return this.x==o.x&&this.y==o.y},o.prototype.mover=function(o){o==r.Sentido.abajo?this.bajar():this.avanzar()},o.prototype.bajar=function(){this.y++},o.prototype.avanzar=function(){this.x++},o}();t.Coordenada=n},function(o,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Estado=void 0,function(o){o[o.tocado=0]="tocado",o[o.indemne=1]="indemne",o[o.hundido=2]="hundido"}(t.Estado||(t.Estado={}))},function(o,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sentido=void 0,function(o){o[o.abajo=0]="abajo",o[o.derecha=1]="derecha"}(t.Sentido||(t.Sentido={}))},function(o,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(new(e(4).Control)).play()},function(o,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Control=void 0;var r=e(0),n=e(5),a=function(){function o(){this._alto=8,this._ancho=12,this._tablero=new n.Tablero(this._ancho,this._alto)}return o.prototype.play=function(){alert("Bienvenidos al juego de los Barcos");do{alert(this._tablero.mostrarTablero()),this._tablero.comprobarCasilla(this.pedirCoordenada())}while(!this._tablero.comprobarFlotaHundida())},o.prototype.pedirCoordenada=function(){return new r.Coordenada(this.solicitarPuntoCoordenada(this._tablero.alto,"Y"),this.solicitarPuntoCoordenada(this._tablero.ancho,"X"))},o.prototype.solicitarPuntoCoordenada=function(o,t){do{var e=prompt("Dame un punto del eje "+t);e.match("\\d+")?e-=1:e=0}while(!this.comprobarCoordenada(e,o));return e},o.prototype.comprobarCoordenada=function(o,t){return o>=0&&o<t},o}();t.Control=a},function(o,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tablero=void 0;var r=e(1),n=e(6),a=function(){function o(o,t){this._casillas=new Array,this._ancho=o,this._alto=t,this._flota=new n.Flota(o,t),this.createTablero(this._ancho,this._alto),this.colocarFlota()}return o.prototype.createTablero=function(o,t){for(var e=0;e<t;e++)this._casillas[e]=new Array(this._ancho)},o.prototype.colocarFlota=function(){for(var o=0;o<this._flota.barcos.length;o++)for(var t=0;t<this._flota.barcos[o].posiciones.length;t++)this.addBarco(this._flota.barcos[o].posiciones[t].coordenada,this._flota.barcos[o].posiciones[t])},o.prototype.addBarco=function(o,t){this._casillas[o.x][o.y]=t},o.prototype.comprobarFlotaHundida=function(){return this._flota.comprobarBarcosHundidos()==this._flota.barcos.length},o.prototype.mostrarTablero=function(){var o="";o+="    ";for(var t=0;t<this._ancho;t++)o+=t+1+"  |  ";o+="\n",o+="    _________________________________________________________",o+="\n";for(t=0;t<this._alto;t++){o+=t+1+"  |   ";for(var e=0;e<this._ancho;e++)null!=this._casillas[t][e]?o+=this.mostrarCasilla(this._casillas[t][e]):o+="X  |  ";o+="____________________________________________________________",o+="\n"}return o},o.prototype.mostrarCasilla=function(o){return"A"==o?"A  |  ":o.estado==r.Estado.indemne?"X  |  ":o.estado==r.Estado.tocado?"T  |  ":"H  |  "},o.prototype.comprobarCasilla=function(o){null==this._casillas[o.x][o.y]?(this._casillas[o.x][o.y]="A",alert("Agua")):this._casillas[o.x][o.y].estado==r.Estado.indemne&&(this._casillas[o.x][o.y].estado=r.Estado.tocado,alert("Tocado"))},Object.defineProperty(o.prototype,"casillas",{get:function(){return this._casillas},enumerable:!1,configurable:!0}),o.prototype.getCasilla=function(o){return this._casillas[o.x][o.y]},Object.defineProperty(o.prototype,"alto",{get:function(){return this._alto},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"ancho",{get:function(){return this._ancho},enumerable:!1,configurable:!0}),o}();t.Tablero=a},function(o,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Flota=void 0;var r=e(1),n=e(7),a=function(){function o(o,t){this._barcos=[],this._generadorFlota=new n.GeneradorFlota(o,t,this._barcos),this.crearFlota()}return o.prototype.crearFlota=function(){for(var o=[2,2,2,2,3,3,3,4,4],t=0;t<o.length;t++){var e=this._generadorFlota.crearBarco(o[t]);this._barcos[t]=e}},o.prototype.comprobarBarcosHundidos=function(){for(var o=0,t=0,e=0;e<this._barcos.length;e++){o=0;for(var n=0;n<this.barcoPosiciones(e).length;n++)this._barcos[e].posiciones[n].estado==r.Estado.tocado&&o++,o==this.barcoPosiciones(e).length&&(this.hundirBarco(this.barcos[e]),t++)}return t},o.prototype.barcoPosiciones=function(o){return this._barcos[o].posiciones},o.prototype.hundirBarco=function(o){for(var t=0;t<o.posiciones.length;t++)o.posiciones[t].estado=r.Estado.hundido;alert("Hundido")},Object.defineProperty(o.prototype,"barcos",{get:function(){return this._barcos},enumerable:!1,configurable:!0}),o}();t.Flota=a},function(o,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeneradorFlota=void 0;var r=e(8),n=e(2),a=e(0),i=function(){function o(o,t,e){this.ancho=o,this.alto=t,this._flota=e}return o.prototype.crearBarco=function(o){do{var t=this.obtenerSentidoAleatorio(),e=this.coordenadaVacia(o,t),n=new r.Barco(o,e,t)}while(this.comprobarSolapamiento(n));return n},o.prototype.comprobarSolapamiento=function(o){for(var t=0;t<this._flota.length;t++)if(o.compruebaSolapamiento(this._flota[t].posiciones))return!0;return!1},o.prototype.coordenadaVacia=function(o,t){do{var e=this.getRandom(0,this.alto),r=this.getRandom(0,this.ancho),n=new a.Coordenada(e,r)}while(this.salidaLimites(n,o,t));return n},o.prototype.salidaLimites=function(o,t,e){var r=!1;return e==n.Sentido.derecha?t+o.x>this.alto&&(r=!0):t+o.y>this.ancho&&(r=!0),r},o.prototype.obtenerSentidoAleatorio=function(){var o;return o=n.Sentido.abajo,1==this.getRandom(0,1)&&(o=n.Sentido.derecha),o},o.prototype.getRandom=function(o,t){return Math.floor(Math.random()*(o-t)+t)},o}();t.GeneradorFlota=i},function(o,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Barco=void 0;var r=e(1),n=e(0),a=e(9),i=function(){function o(o,t,e){this._size=o,this._posiciones=[],this.crearBarco(t,e)}return o.prototype.crearBarco=function(o,t){for(var e=0;e<this.size;e++)this.posiciones.push(new a.Casilla(new n.Coordenada(o.x,o.y),r.Estado.indemne)),o.mover(t)},o.prototype.compruebaSolapamiento=function(o){for(var t=0;t<o.length;t++)for(var e=0;e<this.posiciones.length;e++)if(this.posiciones[e].coordenada.equals(o[t].coordenada))return!0;return!1},Object.defineProperty(o.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"posiciones",{get:function(){return this._posiciones},enumerable:!1,configurable:!0}),o}();t.Barco=i},function(o,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Casilla=void 0;var r=function(){function o(o,t){this._coordenada=o,this._estado=t}return Object.defineProperty(o.prototype,"coordenada",{get:function(){return this._coordenada},set:function(o){this._coordenada=o},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"estado",{get:function(){return this._estado},set:function(o){this._estado=o},enumerable:!1,configurable:!0}),o}();t.Casilla=r}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVsby9jb29yZGVuYWRhLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbG8vZXN0YWRvLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbG8vc2VudGlkby50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbWFpbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29udHJvbC9jb250cm9sLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbG8vdGFibGVyby50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWxvL2Zsb3RhLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbG8vZ2VuZXJhZG9yRmxvdGEudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVsby9iYXJjby50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWxvL2Nhc2lsbGEudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJfeCIsIl95IiwidGhpcyIsInhzIiwieXMiLCJlcXVhbHMiLCJjb29yZGVuYSIsIngiLCJ5IiwibW92ZXIiLCJkaXJlY2Npb24iLCJTZW50aWRvIiwiYWJham8iLCJiYWphciIsImF2YW56YXIiLCJDb29yZGVuYWRhIiwiRXN0YWRvIiwiQ29udHJvbCIsInBsYXkiLCJfYWx0byIsIl9hbmNobyIsIl90YWJsZXJvIiwiVGFibGVybyIsImFsZXJ0IiwibW9zdHJhclRhYmxlcm8iLCJjb21wcm9iYXJDYXNpbGxhIiwicGVkaXJDb29yZGVuYWRhIiwiY29tcHJvYmFyRmxvdGFIdW5kaWRhIiwic29saWNpdGFyUHVudG9Db29yZGVuYWRhIiwiYWx0byIsImFuY2hvIiwibGltaXRlIiwicHVudG8iLCJjb29yZGVuYWRhIiwicHJvbXB0IiwibWF0Y2giLCJjb21wcm9iYXJDb29yZGVuYWRhIiwibWF4IiwiX2Nhc2lsbGFzIiwiQXJyYXkiLCJfZmxvdGEiLCJGbG90YSIsImNyZWF0ZVRhYmxlcm8iLCJjb2xvY2FyRmxvdGEiLCJiYXJjb3MiLCJsZW5ndGgiLCJqIiwicG9zaWNpb25lcyIsImFkZEJhcmNvIiwiYmFyY28iLCJjb21wcm9iYXJCYXJjb3NIdW5kaWRvcyIsInRhYmxlcm8iLCJ1bmRlZmluZWQiLCJtb3N0cmFyQ2FzaWxsYSIsImNhc2lsbGEiLCJlc3RhZG8iLCJpbmRlbW5lIiwidG9jYWRvIiwiZ2V0Q2FzaWxsYSIsIl9iYXJjb3MiLCJfZ2VuZXJhZG9yRmxvdGEiLCJHZW5lcmFkb3JGbG90YSIsImNyZWFyRmxvdGEiLCJjcmVhckJhcmNvIiwicG9zaWNpb25lc1RvY2FkYXMiLCJiYXJjb3NIdW5kaWRvcyIsImJhcmNvUG9zaWNpb25lcyIsImh1bmRpckJhcmNvIiwiaW5kZXgiLCJodW5kaWRvIiwiZmxvdGEiLCJ0YW1hbm9CYXJjbyIsInNlbnRpZG8iLCJvYnRlbmVyU2VudGlkb0FsZWF0b3JpbyIsImNvb3JkZW5hZGFWYWNpYSIsIkJhcmNvIiwiY29tcHJvYmFyU29sYXBhbWllbnRvIiwiY29tcHJ1ZWJhU29sYXBhbWllbnRvIiwic2VudGlkb0JhcmNvIiwicHVudG9YIiwiZ2V0UmFuZG9tIiwicHVudG9ZIiwic2FsaWRhTGltaXRlcyIsImNvb3JkZW5hZGFCYXJjbyIsImZ1ZXJhTGltaXRlcyIsImRlcmVjaGEiLCJtaW4iLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJfc2l6ZSIsImluaWNpYWwiLCJfcG9zaWNpb25lcyIsInNpemUiLCJwdXNoIiwiQ2FzaWxsYSIsImluZGV4T2JqZWN0IiwiX2Nvb3JkZW5hZGEiLCJfZXN0YWRvIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxLQUtoRVosRUFBb0JrQixFQUFJLFNBQVNoQixHQUNYLG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDTixPQUFPQyxlQUFlYixFQUFTaUIsT0FBT0MsWUFBYSxDQUFFQyxNQUFPLFdBRTdEUCxPQUFPQyxlQUFlYixFQUFTLGFBQWMsQ0FBRW1CLE9BQU8sS0FRdkRyQixFQUFvQnNCLEVBQUksU0FBU0QsRUFBT0UsR0FFdkMsR0FEVSxFQUFQQSxJQUFVRixFQUFRckIsRUFBb0JxQixJQUMvQixFQUFQRSxFQUFVLE9BQU9GLEVBQ3BCLEdBQVcsRUFBUEUsR0FBOEIsaUJBQVZGLEdBQXNCQSxHQUFTQSxFQUFNRyxXQUFZLE9BQU9ILEVBQ2hGLElBQUlJLEVBQUtYLE9BQU9ZLE9BQU8sTUFHdkIsR0FGQTFCLEVBQW9Ca0IsRUFBRU8sR0FDdEJYLE9BQU9DLGVBQWVVLEVBQUksVUFBVyxDQUFFVCxZQUFZLEVBQU1LLE1B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cyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAzKTtcbiIsImltcG9ydCB7IFNlbnRpZG8gfSBmcm9tIFwiLi9zZW50aWRvXCI7XG5cbmV4cG9ydCBjbGFzcyBDb29yZGVuYWRhIHtcbiAgLy9MYSBmb3JtYSB0cyBwYXJhIGRlY2xhcmFyIHByb3BpZWRhZGVzIG9ibGlnYXRvcmlhc1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIF94OiBudW1iZXIsIHByaXZhdGUgX3k6IG51bWJlcikge31cblxuICBwdWJsaWMgZ2V0IHgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5feDtcbiAgfVxuICBwdWJsaWMgc2V0IHgoeHM6IG51bWJlcikge1xuICAgIHRoaXMuX3ggPSB4cztcbiAgfVxuICBwdWJsaWMgZ2V0IHkoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5feTtcbiAgfVxuICBwdWJsaWMgc2V0IHkoeXM6IG51bWJlcikge1xuICAgIHRoaXMuX3kgPSB5cztcbiAgfVxuICAvL0hheSBjb3NhcyBqYXZhIHF1ZSBzaWVtcHJlIHZpZW5lbiBiaWVuXG4gIHB1YmxpYyBlcXVhbHMoY29vcmRlbmE6IENvb3JkZW5hZGEpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy54ID09IGNvb3JkZW5hLnggJiYgdGhpcy55ID09IGNvb3JkZW5hLnk7XG4gIH1cbiAgcHVibGljIG1vdmVyKGRpcmVjY2lvbjogU2VudGlkbykge1xuICAgIGlmIChkaXJlY2Npb24gPT0gU2VudGlkby5hYmFqbykge1xuICAgICAgdGhpcy5iYWphcigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmF2YW56YXIoKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgYmFqYXIoKSB7XG4gICAgdGhpcy55Kys7XG4gIH1cbiAgcHVibGljIGF2YW56YXIoKSB7XG4gICAgdGhpcy54Kys7XG4gIH1cbn1cbiIsImV4cG9ydCBlbnVtIEVzdGFkb3tcbiAgICB0b2NhZG8saW5kZW1uZSxodW5kaWRvXG59IiwiZXhwb3J0IGVudW0gU2VudGlkb3tcbiAgICBhYmFqbyxkZXJlY2hhXG59IiwiaW1wb3J0IHtDb250cm9sfSBmcm9tIFwiLi9jb250cm9sL2NvbnRyb2xcIjtcclxuXHJcbmNvbnN0IGNvbnRyb2w9bmV3IENvbnRyb2woKTtcclxuY29udHJvbC5wbGF5KCk7IiwiaW1wb3J0IHtDb29yZGVuYWRhfSBmcm9tIFwiLi4vbW9kZWxvL2Nvb3JkZW5hZGFcIjtcclxuaW1wb3J0IHtUYWJsZXJvfSBmcm9tIFwiLi4vbW9kZWxvL3RhYmxlcm9cIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBDb250cm9sIHtcclxuICAgIHByaXZhdGUgX2FsdG86IG51bWJlciA9IDg7XHJcbiAgICBwcml2YXRlIF9hbmNobzogbnVtYmVyID0gMTI7XHJcbiAgICBwcml2YXRlIF90YWJsZXJvOiBUYWJsZXJvID0gbmV3IFRhYmxlcm8odGhpcy5fYW5jaG8sdGhpcy5fYWx0byk7XHJcblxyXG5cclxuICAgIHB1YmxpYyBwbGF5KCkge1xyXG4gICAgICAgICAgICBhbGVydChcIkJpZW52ZW5pZG9zIGFsIGp1ZWdvIGRlIGxvcyBCYXJjb3NcIilcclxuICAgICAgICBkbyB7XHJcbiAgICAgICAgICAgIGFsZXJ0KHRoaXMuX3RhYmxlcm8ubW9zdHJhclRhYmxlcm8oKSlcclxuICAgICAgICAgICAgdGhpcy5fdGFibGVyby5jb21wcm9iYXJDYXNpbGxhKHRoaXMucGVkaXJDb29yZGVuYWRhKCkpXHJcbiAgICAgICAgfXdoaWxlKCF0aGlzLl90YWJsZXJvLmNvbXByb2JhckZsb3RhSHVuZGlkYSgpKVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcGVkaXJDb29yZGVuYWRhKCk6IENvb3JkZW5hZGEge1xyXG4gICAgICAgIHJldHVybiBuZXcgQ29vcmRlbmFkYSh0aGlzLnNvbGljaXRhclB1bnRvQ29vcmRlbmFkYSh0aGlzLl90YWJsZXJvLmFsdG8sXCJZXCIpLCB0aGlzLnNvbGljaXRhclB1bnRvQ29vcmRlbmFkYSh0aGlzLl90YWJsZXJvLmFuY2hvLFwiWFwiKSlcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNvbGljaXRhclB1bnRvQ29vcmRlbmFkYShsaW1pdGU6bnVtYmVyLHB1bnRvOnN0cmluZyk6IG51bWJlciB7XHJcbiAgICAgICAgZG8ge1xyXG4gICAgICAgICAgICB2YXIgY29vcmRlbmFkYTphbnk9IHByb21wdChcIkRhbWUgdW4gcHVudG8gZGVsIGVqZSBcIitwdW50byk7XHJcbiAgICAgICAgICAgIGlmICghY29vcmRlbmFkYS5tYXRjaChcIlxcXFxkK1wiKSkge1xyXG4gICAgICAgICAgICAgICAgY29vcmRlbmFkYSA9IDA7XHJcbiAgICAgICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvb3JkZW5hZGEtPTE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IHdoaWxlICghdGhpcy5jb21wcm9iYXJDb29yZGVuYWRhKGNvb3JkZW5hZGEsIGxpbWl0ZSkpXHJcbiAgICAgICAgcmV0dXJuIGNvb3JkZW5hZGE7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHByaXZhdGUgY29tcHJvYmFyQ29vcmRlbmFkYShjb29yZGVuYWRhOiBudW1iZXIsIG1heDogbnVtYmVyKTogYm9vbGVhbiB7XHJcbiAgICAgICAgbGV0IG1pbjpudW1iZXI9MDtcclxuICAgICAgICBpZiAoY29vcmRlbmFkYT49bWluICYmIGNvb3JkZW5hZGEgPCBtYXgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuXHJcbn0iLCJpbXBvcnQge0Nhc2lsbGF9IGZyb20gXCIuL2Nhc2lsbGFcIjtcclxuaW1wb3J0IHtFc3RhZG99IGZyb20gXCIuL2VzdGFkb1wiO1xyXG5pbXBvcnQge0Zsb3RhfSBmcm9tIFwiLi9mbG90YVwiO1xyXG5pbXBvcnQge0Nvb3JkZW5hZGF9IGZyb20gXCIuL2Nvb3JkZW5hZGFcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBUYWJsZXJve1xyXG5cclxuICAgIHByaXZhdGUgX2FuY2hvOm51bWJlcjtcclxuICAgIHByaXZhdGUgX2FsdG86bnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBfZmxvdGE6IEZsb3RhO1xyXG4gICAgcHJpdmF0ZSBfY2FzaWxsYXM6QXJyYXk8YW55Pj1uZXcgQXJyYXk8YW55PigpO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFuY2hvOm51bWJlcixhbHRvOm51bWJlcikge1xyXG4gICAgICAgIHRoaXMuX2FuY2hvPWFuY2hvO1xyXG4gICAgICAgIHRoaXMuX2FsdG89YWx0bztcclxuICAgICAgICB0aGlzLl9mbG90YT1uZXcgRmxvdGEoYW5jaG8sIGFsdG8pO1xyXG4gICAgICAgIHRoaXMuY3JlYXRlVGFibGVybyh0aGlzLl9hbmNobyx0aGlzLl9hbHRvKVxyXG4gICAgICAgIHRoaXMuY29sb2NhckZsb3RhKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVUYWJsZXJvKF9hbmNobzpudW1iZXIsX2FsdG86bnVtYmVyKTp2b2lke1xyXG4gICAgICAgIGZvcihsZXQgaT0wO2k8X2FsdG87aSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2Nhc2lsbGFzW2ldPW5ldyBBcnJheSh0aGlzLl9hbmNobyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY29sb2NhckZsb3RhKCkge1xyXG4gICAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCB0aGlzLl9mbG90YS5iYXJjb3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgajogbnVtYmVyID0gMDsgaiA8IHRoaXMuX2Zsb3RhLmJhcmNvc1tpXS5wb3NpY2lvbmVzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEJhcmNvKHRoaXMuX2Zsb3RhLmJhcmNvc1tpXS5wb3NpY2lvbmVzW2pdLmNvb3JkZW5hZGEsIHRoaXMuX2Zsb3RhLmJhcmNvc1tpXS5wb3NpY2lvbmVzW2pdKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFkZEJhcmNvKGNvb3JkZW5hZGE6Q29vcmRlbmFkYSxiYXJjbzpDYXNpbGxhKXtcclxuICAgICAgICB0aGlzLl9jYXNpbGxhc1tjb29yZGVuYWRhLnhdW2Nvb3JkZW5hZGEueV09YmFyY287XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNvbXByb2JhckZsb3RhSHVuZGlkYSgpOiBib29sZWFue1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9mbG90YS5jb21wcm9iYXJCYXJjb3NIdW5kaWRvcygpPT10aGlzLl9mbG90YS5iYXJjb3MubGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBtb3N0cmFyVGFibGVybygpOiBTdHJpbmcge1xyXG4gICAgICAgIGxldCB0YWJsZXJvOiBTdHJpbmcgPSBcIlwiO1xyXG4gICAgICAgIHRhYmxlcm8rPVwiICAgIFwiXHJcbiAgICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IHRoaXMuX2FuY2hvOyBpKyspIHtcclxuICAgICAgICAgICAgdGFibGVybys9KGkrMSkrXCIgIHwgIFwiXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRhYmxlcm8rPVwiXFxuXCJcclxuICAgICAgICB0YWJsZXJvICs9IFwiICAgIF9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX1wiXHJcbiAgICAgICAgdGFibGVybys9XCJcXG5cIlxyXG4gICAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCB0aGlzLl9hbHRvOyBpKyspIHtcclxuICAgICAgICAgICAgdGFibGVybyArPSAoaSsxKStcIiAgfCAgIFwiXHJcbiAgICAgICAgICAgIGZvciAobGV0IGo6IG51bWJlciA9IDA7IGogPCB0aGlzLl9hbmNobzsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fY2FzaWxsYXNbaV1bal0gIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFibGVybyArPSB0aGlzLm1vc3RyYXJDYXNpbGxhKHRoaXMuX2Nhc2lsbGFzW2ldW2pdKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFibGVybyArPSBcIlggIHwgIFwiXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGFibGVybyArPSBcIl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX1wiXHJcbiAgICAgICAgICAgIHRhYmxlcm8gKz0gXCJcXG5cIlxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRhYmxlcm9cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG1vc3RyYXJDYXNpbGxhKGNhc2lsbGE6IGFueSkge1xyXG4gICAgICAgIGlmIChjYXNpbGxhID09IFwiQVwiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIkEgIHwgIFwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY2FzaWxsYS5lc3RhZG8gPT0gRXN0YWRvLmluZGVtbmUpIHtcclxuICAgICAgICAgICAgcmV0dXJuICBcIlggIHwgIFwiO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY2FzaWxsYS5lc3RhZG8gPT0gRXN0YWRvLnRvY2Fkbykge1xyXG4gICAgICAgICAgICByZXR1cm4gIFwiVCAgfCAgXCI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuICBcIkggIHwgIFwiO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgcHVibGljIGNvbXByb2JhckNhc2lsbGEoY29vcmRlbmFkYTogQ29vcmRlbmFkYSkge1xyXG4gICAgICAgIGlmICh0aGlzLl9jYXNpbGxhc1tjb29yZGVuYWRhLnhdW2Nvb3JkZW5hZGEueV0gPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2Nhc2lsbGFzW2Nvb3JkZW5hZGEueF1bY29vcmRlbmFkYS55XSA9IFwiQVwiO1xyXG4gICAgICAgICAgICBhbGVydChcIkFndWFcIik7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9jYXNpbGxhc1tjb29yZGVuYWRhLnhdW2Nvb3JkZW5hZGEueV0uZXN0YWRvID09IEVzdGFkby5pbmRlbW5lKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2Nhc2lsbGFzW2Nvb3JkZW5hZGEueF1bY29vcmRlbmFkYS55XS5lc3RhZG89RXN0YWRvLnRvY2FkbztcclxuICAgICAgICAgICAgYWxlcnQoXCJUb2NhZG9cIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldCBjYXNpbGxhcygpOiBBcnJheTxhbnk+W10ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jYXNpbGxhcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0Q2FzaWxsYShjb29yZGVuYWRhOiBDb29yZGVuYWRhKTogQ2FzaWxsYXtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY2FzaWxsYXNbY29vcmRlbmFkYS54XVtjb29yZGVuYWRhLnldO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBhbHRvKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FsdG87XHJcbiAgICB9XHJcbiAgICBnZXQgYW5jaG8oKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYW5jaG87XHJcbiAgICB9XHJcbn0iLCIvKkVzIGxhIGNsYXNlXG5xdWUgY29udGllbmUgdG9kb3MgbG9zIGJhcmNvcyBcbiovXG5pbXBvcnQge0JhcmNvfSBmcm9tIFwiLi9iYXJjb1wiXG5pbXBvcnQge0VzdGFkb30gZnJvbSBcIi4vZXN0YWRvXCJcbmltcG9ydCB7IEdlbmVyYWRvckZsb3RhIH0gZnJvbSBcIi4vZ2VuZXJhZG9yRmxvdGFcIjtcbmltcG9ydCB7Q2FzaWxsYX0gZnJvbSBcIi4vY2FzaWxsYVwiO1xuXG5leHBvcnQgY2xhc3MgRmxvdGF7XG4gICAgcHJpdmF0ZSBfYmFyY29zOiBCYXJjb1tdPVtdO1xuICAgIHByaXZhdGUgX2dlbmVyYWRvckZsb3RhOiBHZW5lcmFkb3JGbG90YTtcblxuICAgIGNvbnN0cnVjdG9yKGFuY2hvOm51bWJlcixhbHRvOm51bWJlcikge1xuICAgICAgICB0aGlzLl9nZW5lcmFkb3JGbG90YSA9IG5ldyBHZW5lcmFkb3JGbG90YShhbmNobyxhbHRvLHRoaXMuX2JhcmNvcyk7XG4gICAgICAgIHRoaXMuY3JlYXJGbG90YSgpO1xuICAgIH1cblxuICAgIGNyZWFyRmxvdGEoKXtcbiAgICAgICAgY29uc3QgYmFyY29zID0gWzIsIDIsIDIsIDIsMywgMywgMyw0LCA0LF07XG4gICAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCBiYXJjb3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBiYXJjbzogQmFyY28gPSB0aGlzLl9nZW5lcmFkb3JGbG90YS5jcmVhckJhcmNvKGJhcmNvc1tpXSlcbiAgICAgICAgICAgIHRoaXMuX2JhcmNvc1tpXSA9IGJhcmNvO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGNvbXByb2JhckJhcmNvc0h1bmRpZG9zKCk6IE51bWJlciB7XG4gICAgICAgIGxldCBwb3NpY2lvbmVzVG9jYWRhczogbnVtYmVyPTA7XG4gICAgICAgIGxldCBiYXJjb3NIdW5kaWRvczogbnVtYmVyPTA7XG4gICAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCB0aGlzLl9iYXJjb3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHBvc2ljaW9uZXNUb2NhZGFzID0gMDtcbiAgICAgICAgICAgIGZvciAobGV0IGo6IG51bWJlciA9IDA7IGogPCB0aGlzLmJhcmNvUG9zaWNpb25lcyhpKS5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9iYXJjb3NbaV0ucG9zaWNpb25lc1tqXS5lc3RhZG8gPT0gRXN0YWRvLnRvY2Fkbykge1xuICAgICAgICAgICAgICAgICAgICBwb3NpY2lvbmVzVG9jYWRhcysrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocG9zaWNpb25lc1RvY2FkYXMgPT0gdGhpcy5iYXJjb1Bvc2ljaW9uZXMoaSkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaHVuZGlyQmFyY28odGhpcy5iYXJjb3NbaV0pO1xuICAgICAgICAgICAgICAgICAgICBiYXJjb3NIdW5kaWRvcysrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYmFyY29zSHVuZGlkb3M7XG4gICAgfVxuXG4gICAgYmFyY29Qb3NpY2lvbmVzKGluZGV4Om51bWJlcik6IENhc2lsbGFbXSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9iYXJjb3NbaW5kZXhdLnBvc2ljaW9uZXM7XG4gICAgfVxuXG5cbiAgICBwcml2YXRlIGh1bmRpckJhcmNvKGJhcmNvOiBCYXJjbykge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJhcmNvLnBvc2ljaW9uZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGJhcmNvLnBvc2ljaW9uZXNbaV0uZXN0YWRvID0gRXN0YWRvLmh1bmRpZG87XG4gICAgICAgIH1cbiAgICAgICAgYWxlcnQoXCJIdW5kaWRvXCIpO1xuICAgIH1cblxuICAgIGdldCBiYXJjb3MoKTogQmFyY29bXSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9iYXJjb3M7XG4gICAgfVxufSIsIi8vIEdlbmVyYXIgdW5hIHNlcmllIGRlIGJhcmNvcyBxdWUgbm8gc2Ugc29sYXBhblxuLy8geSBxdWUgc29ydGVhbiBsYSBwb3NpY2lvbiBpbmljaWFsIGRlIGNhZGEgYmFyY29cbi8veSBlbCBzZW50aWRvIGVuIHF1ZSBjcmVjZW5cbi8vIEFkZW1hcyBlbCBhcnJheSBkZSBiYXJjb3MgY3JlYWRvIGFzZWd1cmEgcXVlIG5pbmd1bm8gc2UgaGEgXG4vLyBzb2xhcGFkby5cblxuaW1wb3J0IHtCYXJjb30gZnJvbSBcIi4vYmFyY29cIlxuaW1wb3J0IHtTZW50aWRvfSBmcm9tIFwiLi9zZW50aWRvXCI7XG5pbXBvcnQge0Nvb3JkZW5hZGF9IGZyb20gXCIuL2Nvb3JkZW5hZGFcIjtcblxuZXhwb3J0IGNsYXNzIEdlbmVyYWRvckZsb3RhIHtcbiAgICBwcml2YXRlIF9mbG90YTpCYXJjb1tdO1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBhbmNobzogbnVtYmVyLHByaXZhdGUgYWx0bzogbnVtYmVyLGZsb3RhOiBCYXJjb1tdKSB7XG4gICAgICAgIHRoaXMuX2Zsb3RhPWZsb3RhO1xuICAgIH1cblxuICAgIHB1YmxpYyBjcmVhckJhcmNvKHRhbWFub0JhcmNvOiBudW1iZXIpOiBCYXJjbyB7XG4gICAgICAgIGRvIHtcbiAgICAgICAgICAgIGxldCBzZW50aWRvOiBTZW50aWRvID0gdGhpcy5vYnRlbmVyU2VudGlkb0FsZWF0b3JpbygpO1xuICAgICAgICAgICAgbGV0IGNvb3JkZW5hZGE6IENvb3JkZW5hZGEgPSB0aGlzLmNvb3JkZW5hZGFWYWNpYSh0YW1hbm9CYXJjbywgc2VudGlkbyk7XG4gICAgICAgICAgICB2YXIgYmFyY286IEJhcmNvID0gbmV3IEJhcmNvKHRhbWFub0JhcmNvLCBjb29yZGVuYWRhLCBzZW50aWRvKVxuICAgICAgICB9IHdoaWxlICh0aGlzLmNvbXByb2JhclNvbGFwYW1pZW50byhiYXJjbykpXG4gICAgICAgIHJldHVybiBiYXJjbztcbiAgICB9XG5cbiAgICBwcml2YXRlIGNvbXByb2JhclNvbGFwYW1pZW50byhiYXJjbzogQmFyY28sICkge1xuICAgICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgdGhpcy5fZmxvdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChiYXJjby5jb21wcnVlYmFTb2xhcGFtaWVudG8odGhpcy5fZmxvdGFbaV0ucG9zaWNpb25lcykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjb29yZGVuYWRhVmFjaWEodGFtYW5vQmFyY286IG51bWJlciwgc2VudGlkb0JhcmNvOiBTZW50aWRvKTogQ29vcmRlbmFkYSB7XG4gICAgICAgIGRvIHtcbiAgICAgICAgICAgIGxldCBwdW50b1g6bnVtYmVyID0gdGhpcy5nZXRSYW5kb20oMCwgdGhpcy5hbHRvKVxuICAgICAgICAgICAgbGV0IHB1bnRvWTpudW1iZXIgPSB0aGlzLmdldFJhbmRvbSgwLCB0aGlzLmFuY2hvKVxuICAgICAgICAgICAgdmFyIGNvb3JkZW5hZGE6Q29vcmRlbmFkYSA9IG5ldyBDb29yZGVuYWRhKHB1bnRvWCwgcHVudG9ZKTtcbiAgICAgICAgfSB3aGlsZSAodGhpcy5zYWxpZGFMaW1pdGVzKGNvb3JkZW5hZGEsIHRhbWFub0JhcmNvLCBzZW50aWRvQmFyY28pKTtcbiAgICAgICAgcmV0dXJuIGNvb3JkZW5hZGE7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzYWxpZGFMaW1pdGVzKGNvb3JkZW5hZGFCYXJjbzogQ29vcmRlbmFkYSwgdGFtYW5vQmFyY286IG51bWJlciwgc2VudGlkbzogU2VudGlkbykge1xuICAgICAgICBsZXQgcG9zaWNpb25CYXJjbzogbnVtYmVyO1xuICAgICAgICBsZXQgZnVlcmFMaW1pdGVzOiBib29sZWFuPWZhbHNlO1xuICAgICAgICBpZiAoc2VudGlkbyA9PSBTZW50aWRvLmRlcmVjaGEpIHtcbiAgICAgICAgICAgIHBvc2ljaW9uQmFyY28gPSB0YW1hbm9CYXJjbyArIGNvb3JkZW5hZGFCYXJjby54O1xuICAgICAgICAgICAgaWYocG9zaWNpb25CYXJjbyA+IHRoaXMuYWx0byl7XG4gICAgICAgICAgICAgICAgZnVlcmFMaW1pdGVzID0gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcG9zaWNpb25CYXJjbyA9IHRhbWFub0JhcmNvICsgY29vcmRlbmFkYUJhcmNvLnk7XG4gICAgICAgICAgICBpZihwb3NpY2lvbkJhcmNvID4gdGhpcy5hbmNobyl7XG4gICAgICAgICAgICAgICAgZnVlcmFMaW1pdGVzID0gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmdWVyYUxpbWl0ZXM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvYnRlbmVyU2VudGlkb0FsZWF0b3JpbygpOiBTZW50aWRvIHtcbiAgICAgICAgbGV0IHNlbnRpZG86IFNlbnRpZG87XG4gICAgICAgIHNlbnRpZG8gPSBTZW50aWRvLmFiYWpvO1xuICAgICAgICBpZiAodGhpcy5nZXRSYW5kb20oMCwgMSkgPT0gMSl7XG4gICAgICAgICAgICBzZW50aWRvID0gU2VudGlkby5kZXJlY2hhXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNlbnRpZG87XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRSYW5kb20obWluOiBudW1iZXIsIG1heDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtaW4gLSBtYXgpICsgbWF4KTtcbiAgICB9XG5cblxuXG59IiwiaW1wb3J0IHsgRXN0YWRvIH0gZnJvbSAnLi9lc3RhZG8nO1xuaW1wb3J0IHsgQ29vcmRlbmFkYSB9IGZyb20gJy4vY29vcmRlbmFkYSc7XG5pbXBvcnQgeyBDYXNpbGxhIH0gZnJvbSBcIi4vY2FzaWxsYVwiO1xuaW1wb3J0IHsgU2VudGlkbyB9IGZyb20gJy4vc2VudGlkbyc7XG5cbmV4cG9ydCBjbGFzcyBCYXJjb3tcbiAgICBwcml2YXRlIF9wb3NpY2lvbmVzOkNhc2lsbGFbXT1bXTtcblxuXHRjb25zdHJ1Y3RvciggcHJpdmF0ZSBfc2l6ZTpudW1iZXIsaW5pY2lhbDpDb29yZGVuYWRhLGRpcmVjY2lvbjpTZW50aWRvKSB7XG4gICAgICAgIHRoaXMuY3JlYXJCYXJjbyhpbmljaWFsLGRpcmVjY2lvbilcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWFyQmFyY28oaW5pY2lhbDpDb29yZGVuYWRhLGRpcmVjY2lvbjpTZW50aWRvKXtcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMuc2l6ZTsgaW5kZXgrKykge1xuICAgICAgICAgICAgdGhpcy5wb3NpY2lvbmVzLnB1c2gobmV3IENhc2lsbGEobmV3IENvb3JkZW5hZGEoaW5pY2lhbC54LGluaWNpYWwueSksRXN0YWRvLmluZGVtbmUpKVxuICAgICAgICAgICBpbmljaWFsLm1vdmVyKGRpcmVjY2lvbilcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBjb21wcnVlYmFTb2xhcGFtaWVudG8oY2FzaWxsYTpDYXNpbGxhW10pOmJvb2xlYW57XG4gICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBjYXNpbGxhLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgZm9yIChsZXQgaW5kZXhPYmplY3QgPSAwOyBpbmRleE9iamVjdCA8IHRoaXMucG9zaWNpb25lcy5sZW5ndGg7IGluZGV4T2JqZWN0KyspIHtcbiAgICAgICAgICAgICAgICBpZih0aGlzLnBvc2ljaW9uZXNbaW5kZXhPYmplY3RdLmNvb3JkZW5hZGEuZXF1YWxzKGNhc2lsbGFbaW5kZXhdLmNvb3JkZW5hZGEpKXtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9ICAgXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIHNpemVcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgc2l6ZSgpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLl9zaXplO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgcG9zaWNpb25lc1xuICAgICAqIEByZXR1cm4ge0Nhc2lsbGFbXX1cbiAgICAgKi9cblx0cHVibGljIGdldCBwb3NpY2lvbmVzKCk6IENhc2lsbGFbXSB7XG5cdFx0cmV0dXJuIHRoaXMuX3Bvc2ljaW9uZXM7XG5cdH1cblxuXG59IiwiaW1wb3J0IHsgRXN0YWRvIH0gZnJvbSBcIi4vZXN0YWRvXCI7XG5pbXBvcnQgeyBDb29yZGVuYWRhIH0gZnJvbSBcIi4vY29vcmRlbmFkYVwiO1xuXG5leHBvcnQgY2xhc3MgQ2FzaWxsYSB7XG4gIFxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9jb29yZGVuYWRhOiBDb29yZGVuYWRhLCBwcml2YXRlIF9lc3RhZG86IEVzdGFkbykge31cblxuICBcbiAgICAvKipcbiAgICAgKiBHZXR0ZXIgY29vcmRlbmFkYVxuICAgICAqIEByZXR1cm4ge0Nvb3JkZW5hZGF9XG4gICAgICovXG5cdHB1YmxpYyBnZXQgY29vcmRlbmFkYSgpOiBDb29yZGVuYWRhIHtcblx0XHRyZXR1cm4gdGhpcy5fY29vcmRlbmFkYTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogR2V0dGVyIGVzdGFkb1xuICAgICAqIEByZXR1cm4ge0VzdGFkb31cbiAgICAgKi9cblx0cHVibGljIGdldCBlc3RhZG8oKTogRXN0YWRvIHtcblx0XHRyZXR1cm4gdGhpcy5fZXN0YWRvO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgY29vcmRlbmFkYVxuICAgICAqIEBwYXJhbSB7Q29vcmRlbmFkYX0gdmFsdWVcbiAgICAgKi9cblx0cHVibGljIHNldCBjb29yZGVuYWRhKHZhbHVlOiBDb29yZGVuYWRhKSB7XG5cdFx0dGhpcy5fY29vcmRlbmFkYSA9IHZhbHVlO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXR0ZXIgZXN0YWRvXG4gICAgICogQHBhcmFtIHtFc3RhZG99IHZhbHVlXG4gICAgICovXG5cdHB1YmxpYyBzZXQgZXN0YWRvKHZhbHVlOiBFc3RhZG8pIHtcblx0XHR0aGlzLl9lc3RhZG8gPSB2YWx1ZTtcblx0fVxuICBcbiAgXG59XG4iXSwic291cmNlUm9vdCI6IiJ9